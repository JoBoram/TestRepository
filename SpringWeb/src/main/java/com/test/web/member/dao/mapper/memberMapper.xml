<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.test.web.member.dao.MemberDao">

	<select id="selectMember" resultType="memberBean" parameterType="memberBean">
		SELECT
		no,
		member_id AS memberId, member_pw AS memberPw,
		member_name AS
		memberName, member_age AS memberAge,
		member_area AS memberArea,
		member_hp AS memberHp,
		member_sex AS memberSex
		FROM
		member
		WHERE
		member_id=#{memberId}
		<if test="memberPw != null and memberPw != ''">
			AND member_pw=PASSWORD(#{memberPw});
		</if>
	</select>
	<!-- 회원정보 1건 저장 -->
	<insert id="insertMember" parameterType="memberBean">
		INSERT INTO member
		(
		member_id,
		member_pw,
		member_name,
		member_age,
		member_area,
		member_hp,
		member_sex
		)
		VALUES
		( #{memberId},
		PASSWORD(#{memberPw}),
		#{memberName},
		#{memberAge},
		#{memberArea},
		#{memberHp},
		#{memberSex}
		)
	</insert>

	<update id="updateMember" parameterType="memberBean">
		UPDATE member SET
			<if test="memberPw != null and memberPw !=''">
				member_pw = PASSWORD(#{memberPw}),
			</if>
			member_name = #{memberName},
			member_age = #{memberAge},
			member_area = #{memberArea},
			member_hp = #{memberHp},
			member_sex = #{memberSex}
		WHERE
			member_id = #{memberId}
	</update>
</mapper>

